<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Trucks</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        /* Design System */
        :root {
            --couleur-fond-principal: #121212;
            --couleur-primaire: #bb86fc;
            --couleur-secondaire: #03dac6;
            --couleur-surface: #1e1e1e;
            --degrad√©-principal: linear-gradient(45deg, #bb86fc, #03dac6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--couleur-fond-principal);
            color: white;
        }

        .conteneur-principal {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
        }

        .sidebar {
            background: var(--couleur-surface);
            border-radius: 10px;
            padding: 20px;
        }

        .menu-navigation .item-menu {
            display: block;
            padding: 10px 15px;
            border-radius: 5px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: 0.3s;
        }

        .item-menu:hover,
        .item-menu.active {
            background: var(--couleur-primaire);
            color: black;
        }

        .contenu-page {
            display: none;
        }

        .contenu-page.active {
            display: block;
        }

        #carte-food-trucks {
            height: 400px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .carte-food-truck {
            background: var(--couleur-surface);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .bouton {
            background: var(--degrad√©-principal);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            color: black;
            cursor: pointer;
        }

        .bouton:hover {
            opacity: 0.9;
        }

        .login-form, .signup-form {
            background: var(--couleur-surface);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .login-form input, .signup-form input {
            padding: 10px;
            margin: 10px 0;
            width: 100%;
            border-radius: 5px;
        }

        .login-form button, .signup-form button {
            background: var(--degrad√©-principal);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            color: black;
            cursor: pointer;
        }

        .login-form button:hover, .signup-form button:hover {
            opacity: 0.9;
        }

        .menu-item, .commande-item, .panier-item, .favori-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #444;
        }

        .menu-item button, .commande-item button, .panier-item button, .favori-item button {
            background: var(--couleur-primaire);
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }

        .menu-item button:hover, .commande-item button:hover, .panier-item button:hover, .favori-item button:hover {
            background: var(--couleur-secondaire);
        }
    </style>
</head>
<body>
    <div class="conteneur-principal">
        <aside class="sidebar">
            <nav class="menu-navigation">
                <div class="item-menu" data-page="login">üîë Se connecter</div>
                <div class="item-menu" data-page="signup">üìù S'inscrire</div>
                <div class="item-menu" data-page="carte">üìç Carte des Food Trucks</div>
                <div class="item-menu" data-page="menu">üçΩÔ∏è Menu</div>
                <div class="item-menu" data-page="panier">üõí Panier</div>
                <div class="item-menu" data-page="favoris">‚≠ê Plats favoris</div>
                <div class="item-menu" data-page="commandes">üõçÔ∏è Commandes</div>
            </nav>
        </aside>
        <main>
            <section id="login" class="contenu-page active">
                <h2>Se connecter</h2>
                <div class="login-form">
                    <input type="text" id="login-username" placeholder="Nom d'utilisateur">
                    <input type="password" id="login-password" placeholder="Mot de passe">
                    <button onclick="login()">Se connecter</button>
                </div>
            </section>
            <section id="signup" class="contenu-page">
                <h2>S'inscrire</h2>
                <div class="signup-form">
                    <input type="text" id="signup-username" placeholder="Nom d'utilisateur">
                    <input type="password" id="signup-password" placeholder="Mot de passe">
                    <button onclick="signup()">S'inscrire</button>
                </div>
            </section>
            <section id="carte" class="contenu-page">
                <h2>Carte des Food Trucks</h2>
                <div id="carte-food-trucks"></div>
            </section>
            <section id="menu" class="contenu-page">
                <h2>Menu des Food Trucks</h2>
                <div id="menu-list"></div>
            </section>
            <section id="panier" class="contenu-page">
                <h2>Votre Panier</h2>
                <div id="panier-list"></div>
                <button class="bouton" onclick="passerCommande()">Passer commande</button>
            </section>
            <section id="favoris" class="contenu-page">
                <h2>Plats Favoris</h2>
                <div id="favoris-list"></div>
            </section>
            <section id="commandes" class="contenu-page">
                <h2>Historique des Commandes</h2>
                <div id="commandes-list"></div>
            </section>
        </main>
    </div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // Donn√©es des Food Trucks
        const foodTrucks = {
            "Food Truck Courbevoie": {
                position: [48.8997, 2.3096],
                plats: [
                    { nom: 'Burger', type: 'Fast Food', prix: 8 },
                    { nom: 'Frites', type: 'Accompagnement', prix: 3 },
                    { nom: 'Pizza', type: 'Pizzeria', prix: 10 },
                    { nom: 'Tacos', type: 'Mexicain', prix: 7 }
                ]
            }
        };

        let currentUser = null;
        let panier = JSON.parse(localStorage.getItem('panier') || '[]');
        let favoris = JSON.parse(localStorage.getItem('favoris') || '[]');
        let commandes = JSON.parse(localStorage.getItem('commandes') || '[]');

        // Navigation entre pages
        function setupNavigation() {
            const menuItems = document.querySelectorAll('.item-menu');
            const pages = document.querySelectorAll('.contenu-page');
            
            menuItems.forEach(item => {
                item.addEventListener('click', () => {
                    menuItems.forEach(menu => menu.classList.remove('active'));
                    item.classList.add('active');
                    
                    const targetPage = item.dataset.page;
                    pages.forEach(page => page.classList.remove('active'));
                    document.getElementById(targetPage).classList.add('active');
                });
            });
        }

        // Fonction d'inscription
        function signup() {
            const username = document.getElementById('signup-username').value;
            const password = document.getElementById('signup-password').value;

            if (username && password) {
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                if (users.some(user => user.username === username)) {
                    alert("Nom d'utilisateur d√©j√† pris.");
                    return;
                }

                users.push({ username, password });
                localStorage.setItem('users', JSON.stringify(users));
                alert("Inscription r√©ussie !");
            } else {
                alert("Veuillez entrer un nom d'utilisateur et un mot de passe.");
            }
        }

        // Fonction de connexion
        function login() {
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;

            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(user => user.username === username && user.password === password);

            if (user) {
                currentUser = user;
                alert("Connexion r√©ussie !");
                document.getElementById('login-username').value = '';
                document.getElementById('login-password').value = '';
                displayMenu();
                displayPanier();
                displayCommandes();
                displayFavoris();
            } else {
                alert("Nom d'utilisateur ou mot de passe incorrect.");
            }
        }

        // Affichage des plats du menu
        function displayMenu() {
            const menuList = document.getElementById('menu-list');
            menuList.innerHTML = '';

            Object.keys(foodTrucks).forEach(truckName => {
                const truck = foodTrucks[truckName];
                truck.plats.forEach(plat => {
                    const platElement = document.createElement('div');
                    platElement.classList.add('menu-item');
                    platElement.innerHTML = `${plat.nom} (${plat.type}) - ‚Ç¨${plat.prix}`;
                    
                    const addButton = document.createElement('button');
                    addButton.textContent = "Ajouter au panier";
                    addButton.onclick = () => addToPanier(plat);
                    platElement.appendChild(addButton);
                    
                    menuList.appendChild(platElement);
                });
            });
        }

        // Ajouter un plat au panier
        function addToPanier(plat) {
            if (!panier.some(item => item.nom === plat.nom)) {
                panier.push(plat);
                localStorage.setItem('panier', JSON.stringify(panier));
                alert(`${plat.nom} ajout√© au panier.`);
                displayPanier();
            } else {
                alert("Ce plat est d√©j√† dans votre panier.");
            }
        }

        // Supprimer un plat du panier
        function removeFromPanier(plat) {
            panier = panier.filter(item => item.nom !== plat.nom);
            localStorage.setItem('panier', JSON.stringify(panier));
            alert(`${plat.nom} supprim√© du panier.`);
            displayPanier();
        }

        // Afficher le panier
        function displayPanier() {
            const panierList = document.getElementById('panier-list');
            panierList.innerHTML = '';

            let total = 0;

            panier.forEach(plat => {
                const platElement = document.createElement('div');
                platElement.classList.add('panier-item');
                platElement.innerHTML = `${plat.nom} - ‚Ç¨${plat.prix}`;
                
                const removeButton = document.createElement('button');
                removeButton.textContent = "Supprimer";
                removeButton.onclick = () => removeFromPanier(plat);
                platElement.appendChild(removeButton);
                
                panierList.appendChild(platElement);
                total += plat.prix;
            });

            const totalElement = document.createElement('div');
            totalElement.innerHTML = `<strong>Total : ‚Ç¨${total}</strong>`;
            panierList.appendChild(totalElement);
        }

        // Passer la commande
        function passerCommande() {
            if (panier.length === 0) {
                alert("Aucun plat dans le panier.");
                return;
            }

            const table = prompt("Veuillez entrer votre num√©ro de table:");
            if (table) {
                commandes.push({
                    utilisateur: currentUser.username,
                    plats: panier,
                    table: table,
                    date: new Date(),
                    statut: "en livraison"
                });

                localStorage.setItem('commandes', JSON.stringify(commandes));
                alert(`Commande pass√©e √† la table ${table}.`);

                panier = [];
                localStorage.setItem('panier', JSON.stringify(panier));
                displayPanier();
                displayCommandes();
            } else {
                alert("Le num√©ro de table est requis.");
            }
        }

        // Affichage des commandes
        function displayCommandes() {
            const commandesList = document.getElementById('commandes-list');
            commandesList.innerHTML = '';

            commandes.forEach(commande => {
                const commandeElement = document.createElement('div');
                commandeElement.classList.add('commande-item');
                commandeElement.innerHTML = `Commande de ${commande.utilisateur} √† la table ${commande.table} le ${commande.date.toLocaleString()} - Statut: ${commande.statut}`;
                commandesList.appendChild(commandeElement);
            });
        }

        // Affichage des plats favoris
        function displayFavoris() {
            const favorisList = document.getElementById('favoris-list');
            favorisList.innerHTML = '';

            favoris.forEach(plat => {
                const platElement = document.createElement('div');
                platElement.classList.add('favori-item');
                platElement.innerHTML = `${plat.nom} (${plat.type}) - ‚Ç¨${plat.prix}`;
                
                const removeButton = document.createElement('button');
                removeButton.textContent = "Supprimer des favoris";
                removeButton.onclick = () => removeFromFavoris(plat);
                platElement.appendChild(removeButton);
                
                favorisList.appendChild(platElement);
            });
        }

        // Ajouter un plat aux favoris
        function addToFavoris(plat) {
            if (!favoris.some(item => item.nom === plat.nom)) {
                favoris.push(plat);
                localStorage.setItem('favoris', JSON.stringify(favoris));
                alert(`${plat.nom} ajout√© aux favoris.`);
                displayFavoris();
            } else {
                alert("Ce plat est d√©j√† dans vos favoris.");
            }
        }

        // Supprimer un plat des favoris
        function removeFromFavoris(plat) {
            favoris = favoris.filter(item => item.nom !== plat.nom);
            localStorage.setItem('favoris', JSON.stringify(favoris));
            alert(`${plat.nom} supprim√© des favoris.`);
            displayFavoris();
        }

        // Initialisation de la carte
        function initCarte() {
            const map = L.map('carte-food-trucks').setView([48.8997, 2.3096], 13);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

            Object.keys(foodTrucks).forEach(truckName => {
                const truck = foodTrucks[truckName];
                L.marker(truck.position).addTo(map).bindPopup(`<b>${truckName}</b>`);
            });
        }

        // Appels initiaux
        setupNavigation();
        initCarte();
    </script>
</body>
</html>

